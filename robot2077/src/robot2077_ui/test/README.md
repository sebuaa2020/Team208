## UI模块单元测试文档

#### API测试

该部分对UI模块中的主要API进行白盒测试。

速度检测函数movemsg_sub_callback及仪表盘显示函数movemsg_get：

- 函数功能：速度检测函数movemsg_sub_callback为机器人速度监听的回调函数，获取机器人当前各向速度并利用信号槽机制发送到仪表盘显示函数movemsg_get；仪表盘显示函数movemsg_get根据仪表盘显示范围放缩速度值并在仪表盘中显示。

- 输入：机器人各向速度值，格式如下：

  | 字段           | 含义                                                      |
  | -------------- | --------------------------------------------------------- |
  | float linear.x | 机器人前后平移运动速度，正值往前，负值往后，单位是“米/秒” |
  | float linear.y | 机器人左右平移运动速度，正值往左，负值往有，单位是“米/秒” |
  | float linear.z | 机器人自转速度，正值左转，负值右转，单位是“弧度/秒”       |

- 输出：无数据输出，观察依据为速度仪表盘显示内容,显示效果如图：<img src="\img\仪表盘显示样例.png" style="zoom: 33%;" />

#### 模块功能测试

该部分对UI模块的整体功能进行测试，目的是确认界面能否正常显示，以及程序的各个子功能是否正常工作。

运行方法：

	1. 执行roslaunch robot2077_objdetect obj_test.launch命令，启动模拟器；
 	2. 执行roslaunch robot2077_ui robot2077_ui命令，启动UI整体程序。

各个功能的测试方法及应观察到的现象：

1.  整体功能：点击各个功能选项后能够正常进入对应功能子界面，点击子界面中的"返回"选项后能够正常返回主界面，点击主界面的"退出"选项后程序正常结束且终端中的roslaunch进程结束；
2.  主动控制功能：能够通过点击、键盘控制和手柄控制三种方式操控机器人移动，且自动调用了避障模块，界面中按钮能够实时显示当前输入，且仪表盘能够正确显示机器人各向移动速度；
3.  地图建立功能：能够通过点击和键盘控制两种方式操控机器人移动，且自动调用了避障模块，界面中按钮能够实时显示当前输入，点击"显示地图"选项后能够显示正在建立的地图，在"输入地图名称输入框"中完成输入并点击"保存地图"选项后，能够正确保存地图；
4.  导航功能：点击"设置目标点"选项后能在界面的地图显示区域设置目标点和机器人朝向，机器人能够正确移动至目标位置并调整朝向；
5.  目标检测与抓取功能： 点击"开始检测"选项后，界面中能够正确显示机器人模型和被检测物体。